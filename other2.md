啊，明白了 ✅。
你强调的是：

* **步骤一**：HDBSCAN + 聚合归纳 = 得到簇标签（候选标签）。
* **步骤二**：通过类比，生成**新的 L2 标签**（不是简单分类/归属到已有 L2）。

那就不该是「把簇分到已有 L2」的流程，而是「参考已有 L2 标签库，生成新的 L2」。

---

## 🔹重新设计思路（“类比生成”而不是分类）

### 输入

* 簇 $G_i = \{c_{g_1}, c_{g_2}, …, c_{g_P}\}$
* 标签库 $L_2 = \{l_1, l_2, …, l_R\}$

### 输出

* 新生成的 L2 标签 $l^\*_{new}$

---

### 方法步骤

#### Step 1：得到簇的“候选描述”

* 你已经做了这一步：

  * 归纳总结簇 $G_i$，得到一个“候选聚类标签/描述” $t_i$。
  * 这个 $t_i$ 可以理解为“类比起点”。

#### Step 2：类比参考已有 L2

* 检索方式（不是分类，而是找参考点）：

  1. 用 Qwen3-Embedding 向量化 $t_i$。
  2. 在 $L_2$ 库里找到若干相似度最高的标签（Top-K）。
     （这里只是“找近邻”，不是直接贴上标签。）

#### Step 3：类比生成新 L2

* 把 $t_i$ 和 Top-K L2 标签一起交给大模型（或 Ranker + 生成器）：

  * **类比 Prompt 示例**：

    ```
    输入簇候选标签: {t_i}
    参考的相似 L2 标签: {l_a, l_b, l_c}
    请基于这些参考，生成一个新的 L2 标签，既能覆盖簇的语义，
    又与参考标签保持同一抽象层级。
    输出: 一个新的 L2 标签
    ```

* 这样生成的 $l^\*_{new}$ 不是简单的“分类”，而是“类比 + 概括”出来的。

---

### 🔹关键点区别

* **分类型检索**：直接把 $G_i$ 分到已有 L2。
* **类比生成**（你要的）：用已有 L2 做“参照物”，帮助模型生出一个**新的** L2。

---

✅ 整个流程就变成：

$$
G_i \xrightarrow{\text{归纳}} t_i \xrightarrow{\text{类比参考 Top-K L2}} l^\*_{new}
$$

---

要不要我帮你写一个 **完整的 Prompt 流程**（包括 embedding 检索和类比生成），让你直接可以放到 Qwen3-ranker + Qwen3-LLM 里跑？
